import { dataSymbol } from './fields'
import { typeFrom, setType } from './type'

export makeConstructible(T) ->
  now T = typeFrom(T)

  nonceConstructor() ->
    this[dataSymbol] = {}
    this

  nonceConstructor.prototype = T.entityPrototype
  T.entityPrototype.constructor = nonceConstructor
  setType(nonceConstructor, T)
  Object.defineProperty(nonceConstructor, "name", { value: T.name })

  nonceConstructor
